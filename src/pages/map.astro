---
import Layout from '../layouts/Layout.astro'
import Header from '../components/Header.astro'
import PageWrapper from '../components/PageWrapper.astro'
import PageHeader from '../components/PageHeader.astro'
import { safeFetchSingleType } from '../lib/strapi'
import type { MapContent } from '../types/strapi'

const mapData = await safeFetchSingleType<MapContent>({
  endpoint: 'map',
  contentTypeName: 'map',
})

const iframeSrc = mapData?.mapIframeSrc || ''
---

<Layout title="Lucas Silbernagel | Travel Map">
  <Header showBackButton={true} />
  <PageWrapper>
    <PageHeader
      title="Map"
      subtitle="Countries I've visited"
      class="mb-8"
      titleClass="mb-4 text-4xl font-bold text-white md:text-5xl"
    />

    <div class="mx-auto max-w-6xl">
      <div class="terminal-card p-4 md:p-8">
        <div class="relative overflow-hidden rounded-lg">
          {
            iframeSrc ? (
              <iframe src={iframeSrc} style="width: 100%; height: 600px;" />
            ) : (
              <div class="flex h-[600px] items-center justify-center text-gray-500">
                Map iframe source not available
              </div>
            )
          }
        </div>
      </div>
    </div>
  </PageWrapper>
</Layout>

<style>
  .terminal-card {
    background: white;
    border-radius: 1rem;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
  }
</style>
